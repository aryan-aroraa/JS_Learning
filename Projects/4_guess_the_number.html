<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess the number</title>
    <style>
        *{
            padding: 0;
            margin: 0;
            font-family: sans-serif;
        }
        body{
            background-color: #212121;
            color: white;
        }
        .wrapper{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 10px;
            gap: 10px;
        }
        .wrapper p{
            font-size: 18px;
        }
        form{
            margin-top: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        form label{
            font-size: 40px;
        }
        form input{
            font-size: 20px;
            border-radius: 10px;
        }
        form input[type="text"]{
            text-align: center;
            padding: 5px;
        }
        form input[type="submit"]{
            background-color: rgb(207, 111, 0);
            color: white;
            padding: 10px;
        }
        #lowOrHigh{
            margin: 20px;
            font-size: 30px;
            color: #f0ff20;
        }
        .info{
            /* margin: 30px; */
            display: flex;
            flex-direction: column;
            gap: 5px;
            align-items: center;
        }
        #prevGuess{
            background-color: #414141;
            padding: 5px;
            border-radius: 5px;
        }
        .err-msg{
            color: rgb(255, 60, 60);
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <h1>Number guessing game</h1>
        <p>Guess a number between 1 and 100</p>
        <p>You have 10 attempts</p>

        <form>
            <label for="guessField">Guess a number</label>
            <input type="text" id="guessField">
            <input type="submit" id="submitBtn" value="Submit Guess">
        </form>
        <p id="lowOrHigh"></p>
        <div class="info">
            <p>Previous guesses: <span id="prevGuess"></span></p>
            <p>Attempts left: <span id="attempts"></span></p>
        </div>
        <p class="err-msg"></p>
    </div>

</body>
<script>
    let randomNumber = Math.floor(Math.random() * 100 + 1);
    
    let prevGuessList = []
    let guessNum = 10;
    let playGame = true

    let submit = document.querySelector("#submitBtn")
    const userInput = document.querySelector("#guessField")
    const errorMsg = document.querySelector(".err-msg")
    const lowOrHigh = document.querySelector("#lowOrHigh")
    const attempts = document.querySelector("#attempts")
    const prevGuess = document.querySelector("#prevGuess")
    let info = document.querySelector(".info")
    let p = document.createElement("p")
    attempts.innerHTML = guessNum

    if(playGame){
        submit.addEventListener("click", (e) => {
            e.preventDefault();
            let guess = parseInt(userInput.value)
            validateGuess(guess);
        })
    }

    function validateGuess(guess){
        if (isNaN(guess)) {
            errorMsg.innerHTML = "Please input a valid number"
        }
        else if(guess < 1 || guess > 100){
            errorMsg.innerHTML = "Number should be in the range 1-100"
        }
        else{
            errorMsg.innerHTML = ""
            userInput.value = ""
            guessSlot(guess)
            guessNum--
            attempts.innerHTML = guessNum
            if (guessNum < 1) {
                lowOrHigh.innerHTML = `Random number was ${randomNumber}`
                lowOrHigh.style.color = "red"   
                endGame()
            }
            else{
                checkGuess(guess)
            }
        }
    }
    function guessSlot(guess){
        prevGuessList.push(guess)
        prevGuess.innerHTML = prevGuessList
    }
    function checkGuess(guess){        
        if (guess === randomNumber) {
            lowOrHigh.innerHTML = `Correct! Random number was ${randomNumber}`
            lowOrHigh.style.color = "#00db04"
            endGame()
        }
        else if(guess > randomNumber){
            lowOrHigh.innerHTML = "Think lower!"
        }
        else{
            lowOrHigh.innerHTML = "Think higher!"
        }
    }

    function endGame(){
        userInput.setAttribute("disabled", "")
        submit.setAttribute("disabled", "")
        playGame = false
        p.classList.add('button');
        p.innerHTML = `<h2 id="newGame">Start new Game</h2>`;
        p.style.cursor = "pointer"
        info.appendChild(p)
        newGame()
    }
    function newGame(){
        const newGameButton = document.querySelector('#newGame');
        newGameButton.addEventListener("click", () => {
            randomNumber = parseInt(Math.random() * 100 + 1);
            prevGuessList = [];
            guessNum = 10
            attempts.innerHTML = guessNum
            prevGuess.innerHTML = ""
            userInput.removeAttribute("disabled")
            submit.removeAttribute("disabled")
            info.removeChild(p)

            lowOrHigh.innerHTML = ""
            lowOrHigh.style.color = "#f0ff20"
        })
    }
</script>
</html>